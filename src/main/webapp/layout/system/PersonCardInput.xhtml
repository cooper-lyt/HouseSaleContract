<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:a="http://richfaces.org/a4j" xmlns:r="http://richfaces.org/rich">

    <!-- param: personEntityHelper  , render-->


        <a:outputPanel id="personCardInput" layout="block" class="input-group">

        <a:outputPanel id="credentialsType" layout="block" styleClass="input-group-btn">

            <h:selectOneMenu  label="#{messages.Person_credentialsType}" id="personCredentialsTypeInput"
                              styleClass="selectpicker select-menu-btn input-group-first"
                              value="#{_person.credentialsType}" required="true">
                <s:selectItems var="_type" value="#{credentialsTypes}" label="#{messages[_type.name()]}"/>
                <s:convertEnum/>
                <a:ajax event="valueChange" listener="#{_person.typeChange}"
                        render="personCardInput #{render}"
                        oncomplete="initDynamicEditInputs('#{r:clientId('credentialsType')}'); initDynamicEditInputs('#{r:clientId('render')}');"
                        execute="@this" status="#{personStatus}">
                    <a:attachQueue requestDelay="0"/>
                </a:ajax>


            </h:selectOneMenu>

            <a:commandLink styleClass="btn btn-default #{((empty _person.credentialsType.name()) or (_person.credentialsType.name() eq 'MASTER_ID')) ? '' : 'disabled'}"
                           id="readBtn" disabled="#{not (_person.credentialsType.name() eq 'MASTER_ID')} "
                           execute="@this" immediate="true" style="height: 34px;"
                           render="credentialsNumber,cerdentialsName">
                <span class="octicon octicon-file-media" />
            </a:commandLink>
        </a:outputPanel>

        <h:inputText id="credentialsNumber" readonly="#{(_person.credentialsType.name() eq 'OTHER')}"
                     label="#{messages.Person_credentialsNumber}"
                     styleClass="form-control"
                     required="true"
                     size="25"
                     maxlength="100"
                     p:placeholder="#{messages.Person_credentialsNumber}"
                     value="#{_person.credentialsNumber}">
            <a:ajax event="blur" render="cerdentialsName #{render}"
                    oncomplete="initDynamicEditInputs('#{r:clientId('credentialsType')}'); initDynamicEditInputs('#{r:clientId('render')}');"
                    status="#{personStatus}" execute="personCredentialsTypeInput,credentialsNumber">
                <a:attachQueue requestDelay="0"/>
            </a:ajax>
        </h:inputText>



        <div class="input-group-addon">
@
        </div>
        <h:inputText id="cerdentialsName" disabled="#{_person.manager}" value="#{_person.personName}"
                     p:placeholder="#{messages.Person_personName}"
                     required="true"  styleClass="form-control" label="#{messages.Person_personName}">

        </h:inputText>

            <ui:insert name="after"/>

  </a:outputPanel>


</ui:composition>